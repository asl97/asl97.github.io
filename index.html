<html>
    <head>
        <style>
            #main {
                display: flex;
                gap: 1vh 1vw;
            }

            .item {
                place-items: center;
                display: grid;
                border: gray solid 2px;
                padding: 1vh 1vw;
            }
 
            .icon {
                font-size: 5vw;
            }
        </style>
    </head>
    <body>
        <div id="main"></div>
        <script>
            create_icon = (name, icon)=>{
                let div = document.createElement('div');
                div.classList.add('item');
                let idiv = document.createElement('div');
                idiv.classList.add('icon');
                idiv.textContent = icon;
                div.appendChild(idiv);

                let text = document.createElement('span');
                text.textContent = name;
                div.appendChild(text);

                return div
            }

            create_folder = (folder_name)=>{
                let div = create_icon(folder_name, '📁');
                div.onclick = ()=>{alert('Not implemented yet')};
                return div
            }

            create_file = (file_name)=>{
                let div = create_icon(file_name, '🗎');
                // TODO: implement support for navigation with folder
                div.onclick = ()=>{window.location.href.slice(0, window.location.href.lastIndexOf('/')+1) += file_name};
                return div
            }

            async function main(){
                r = await fetch('index.json')
                j = await r.json()
                let [dirs, files] = j;
                let mdiv = document.getElementById('main');

                for (let folder of dirs){
                    mdiv.appendChild(create_folder(folder));
                }
                for (let file of files){
                    mdiv.appendChild(create_file(file));
                }
            }

            main()
        </script>
    </body>
</html>